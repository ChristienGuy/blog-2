---
title: You can't test hooks with Enzyme
date: 2019-03-11
path: /cant-test-hooks-with-enzyme
excerpt: At least, not yet.
draft: true
---

<!-- Simpsons gif? -->
## Difficulties
can't currently test hooks with enzyme as mount and render calls do not trigger particular hooks e.g useEffect

ReactTestUtils exposes a new api `act` that you can wrap render calls in and will trigger useEffect hooks.

Explain why useEffect runs 'asynch' and when the browser is idle. So no garauntee on time it runs

Can try to monkey patch enzyme render and mount but it's a pita and not worth it because 
hook support is incoming for enzyme anyway [link to github issue]

## Solution with act()
Instead you can just use ReactDOM render for anything that doesn't require a nice snapshot and wrap render calls in act() to allow
hooks to complete synchronously




## Examples
Example component:

```jsx

```

Instead of:

```jsx
  const wrapper = mount(<Counter />);

  const count = wrapper.find(Count);

  expect(count.text()).toEqual(0);
```

```jsx
  const el = document.createElement('div');
  document.body.appendChild(el);
  act(() => {
      ReactDOM.render(<Counter />, el);
  });

  const count = el.querySelector('[data-testid="count-value"]')

  expect(count.innerHTML).toEqual(0);
```